<script lang="ts">
	import Node from './Node.svelte';

	export let isIntersecting = false;

	let spriteNodeActive = false;
	let audioNodeActive = false;
	let animationNodeActive = false;
</script>

<svg
	class="nodeFrame"
	class:isIntersecting
	width="65"
	height="137"
	viewBox="0 0 65 137"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
>
	<path
		d="M30.3363 0.000982854C29.3092 0.000982854 28.4823 0.828745 28.4823 1.85692V7.42465C28.4823 8.45283 29.3092 9.28049 30.3363 9.28049H32.1903V11.1182C31.9898 11.1245 31.7918 11.1634 31.6037 11.2332L27.8018 12.5018L26.5343 8.69584C26.4118 8.30888 26.1659 7.97281 25.8343 7.73911C25.5027 7.50541 25.1038 7.38698 24.6985 7.40195C24.4086 7.41252 24.1252 7.49105 23.8711 7.63124C23.617 7.77143 23.3993 7.96936 23.2355 8.20911C23.0717 8.44885 22.9665 8.72373 22.9282 9.01162C22.8899 9.29952 22.9195 9.59239 23.0149 9.8667L24.8687 15.4344C24.9457 15.6658 25.0674 15.8798 25.227 16.0641C25.3866 16.2484 25.5809 16.3993 25.7988 16.5084C26.0167 16.6175 26.254 16.6825 26.497 16.6997C26.74 16.717 26.984 16.6861 27.2151 16.6088L30.3365 15.5686V16.7031C30.3365 16.7788 30.3716 16.8442 30.3789 16.917L21.8913 22.5828C21.6844 22.716 21.506 22.8891 21.3665 23.0921C21.2271 23.295 21.1293 23.5237 21.0791 23.7649C21.0288 24.006 21.0271 24.2548 21.0738 24.4966C21.1206 24.7384 21.2149 24.9686 21.3514 25.1735C21.4879 25.3785 21.6638 25.5542 21.8688 25.6904C22.0738 25.8266 22.3039 25.9206 22.5456 25.9669C22.7873 26.0132 23.0357 26.0109 23.2765 25.9601C23.5173 25.9093 23.7456 25.811 23.948 25.671L33.3229 19.4146L36.0929 24.9568C36.2924 25.3567 36.6292 25.671 37.0416 25.8421C37.4541 26.0132 37.9143 26.0297 38.3378 25.8884L43.8997 24.0324C44.1374 23.9609 44.3583 23.8423 44.5493 23.6837C44.7404 23.5252 44.8977 23.3298 45.0119 23.1093C45.1262 22.8888 45.195 22.6475 45.2144 22.3998C45.2338 22.1521 45.2033 21.9031 45.1247 21.6675C45.0462 21.4318 44.9212 21.2143 44.7571 21.0279C44.5931 20.8415 44.3933 20.69 44.1697 20.5823C43.946 20.4746 43.7031 20.4129 43.4552 20.401C43.2073 20.389 42.9595 20.427 42.7266 20.5126L38.6892 21.8574L36.8824 18.2365C37.3938 17.9066 37.7514 17.36 37.7514 16.7031V14.8473H40.315L41.6548 17.5333C41.7623 17.7535 41.9124 17.9502 42.0964 18.1121C42.2803 18.2739 42.4944 18.3977 42.7264 18.4762C42.9584 18.5547 43.2036 18.5865 43.4479 18.5697C43.6922 18.5528 43.9308 18.4877 44.1498 18.3781C44.3688 18.2684 44.564 18.1164 44.724 17.9309C44.8841 17.7453 45.0058 17.5298 45.0822 17.2969C45.1586 17.064 45.1881 16.8183 45.1691 16.5739C45.1501 16.3295 45.083 16.0913 44.9715 15.873L43.1175 12.1613C42.9635 11.853 42.7268 11.5937 42.4339 11.4126C42.141 11.2314 41.8035 11.1354 41.4592 11.1354H35.8973V9.27961H37.7511C38.7782 9.27961 39.6051 8.4518 39.6051 7.42362V1.85587C39.6051 0.827722 38.7782 0 37.7511 0L30.3363 0.000982854ZM30.3363 3.71272H32.1903V7.42443H30.3363V3.71272Z"
		fill="#478CBF"
	/>
	<path d="M0.942383 10.9527L8.01345 18.0237L15.0845 10.9527" stroke="#fff" stroke-width="2" />
	<path
		d="M8 27L8 48.5M29.5 124H8L8 86M8 86H29.5M8 86L8 48.5M8 48.5H29.5"
		stroke="#fff"
		stroke-width="2"
	/>
</svg>

<div class="nodes" class:isIntersecting>
	<Node
		x={60}
		y={76}
		activeColor="#F57389"
		isActive={spriteNodeActive}
		on:click={() => {
			spriteNodeActive = !spriteNodeActive;
		}}
	>
		<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M8.54241 2.60001C5.25012 2.60001 2.59961 5.25048 2.59961 8.54288V17.4571C2.59961 20.7495 5.25012 23.4 8.54241 23.4H17.4568C20.7493 23.4 23.3996 20.7495 23.3996 17.4571V8.54288C23.3996 5.25048 20.7491 2.60001 17.4568 2.60001H8.54241ZM7.05675 10.0286C7.87985 10.0286 8.54241 10.6912 8.54241 11.5143V14.4856C8.54241 15.3087 7.87985 15.9714 7.05675 15.9714C6.23364 15.9714 5.57096 15.3087 5.57096 14.4856V11.5143C5.57096 10.6912 6.23364 10.0286 7.05675 10.0286ZM18.9425 10.0286C19.7657 10.0286 20.4283 10.6912 20.4283 11.5143V14.4856C20.4283 15.3087 19.7657 15.9714 18.9425 15.9714C18.1195 15.9714 17.4569 15.3087 17.4569 14.4856V11.5143C17.4569 10.6912 18.1195 10.0286 18.9425 10.0286ZM16.1364 17.6167C16.4357 17.6096 16.7301 17.6931 16.9811 17.8562C17.232 18.0193 17.4279 18.2544 17.543 18.5307C17.6581 18.807 17.6871 19.1116 17.6261 19.4047C17.5652 19.6977 17.4172 19.9655 17.2014 20.173C16.0873 21.2872 14.5753 21.914 12.9996 21.914C11.4241 21.914 9.91195 21.2871 8.79786 20.173C8.58608 19.9669 8.4406 19.7022 8.37999 19.413C8.31939 19.1237 8.34644 18.823 8.45766 18.5491C8.56888 18.2753 8.75924 18.0409 9.00439 17.8758C9.24955 17.7107 9.53836 17.6225 9.8339 17.6225C10.0325 17.6225 10.229 17.6623 10.4119 17.7395C10.5948 17.8168 10.7604 17.9299 10.8988 18.0722C11.4564 18.6298 12.2111 18.9429 12.9997 18.9429C13.7884 18.9429 14.543 18.6303 15.1006 18.0722C15.3723 17.7898 15.7447 17.6261 16.1365 17.6169L16.1364 17.6167Z"
				fill="currentColor"
			/>
		</svg>
	</Node>

	<Node
		x={60}
		y={114}
		activeColor="#78E5F6"
		isActive={audioNodeActive}
		on:click={() => {
			audioNodeActive = !audioNodeActive;
		}}
	>
		<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M20.3742 0.521934C20.2195 0.521934 20.066 0.547797 19.9171 0.590326L6.91713 4.28845C6.12077 4.5157 5.57182 5.24065 5.57143 6.06551V16.329C5.26585 16.2662 4.95476 16.2347 4.64286 16.2347C2.0787 16.2347 1.2441e-10 18.3042 1.2441e-10 20.8573C-1.85713e-05 23.4103 2.0787 25.48 4.64286 25.48C7.14183 25.48 9.19065 23.5065 9.27849 21.0199C9.28406 20.9662 9.28591 20.9107 9.28591 20.8571V7.46202L18.5716 4.82227V10.6873L22.2859 8.83821V2.36648C22.2842 1.32509 21.4197 0.490481 20.3744 0.520805L20.3742 0.521934ZM17.6429 13.462C17.1284 13.462 16.7143 13.8743 16.7143 14.3865V23.6318C16.7143 24.144 17.1284 24.5564 17.6429 24.5564C18.1573 24.5564 18.5714 24.144 18.5714 23.6318V14.3865C18.5714 13.8743 18.1573 13.462 17.6429 13.462ZM21.3571 15.3111C20.8427 15.3111 20.4286 15.7234 20.4286 16.2356V21.7828C20.4286 22.295 20.8427 22.7073 21.3571 22.7073C21.8716 22.7073 22.2857 22.295 22.2857 21.7828V16.2356C22.2857 15.7234 21.8716 15.3111 21.3571 15.3111ZM13.9286 17.1601C13.4141 17.1601 13 17.5725 13 18.0847V19.9337C13 20.4459 13.4141 20.8582 13.9286 20.8582C14.443 20.8582 14.8571 20.4459 14.8571 19.9337V18.0847C14.8571 17.5725 14.443 17.1601 13.9286 17.1601ZM25.0714 17.1601C24.557 17.1601 24.1429 17.5725 24.1429 18.0847V19.9337C24.1429 20.4459 24.557 20.8582 25.0714 20.8582C25.5859 20.8582 26 20.4459 26 19.9337V18.0847C26 17.5725 25.5859 17.1601 25.0714 17.1601Z"
				fill="currentColor"
			/>
		</svg>
	</Node>

	<Node
		x={60}
		y={153}
		isActive={animationNodeActive}
		activeColor="#F6AA78"
		on:click={() => {
			animationNodeActive = !animationNodeActive;
		}}
	>
		<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path
				d="M0 0V26H2.16547V22.2858H5.57141V26H20.4286V22.2858H24.1428V26H26V0H24.1428V3.71426H20.4286V0H5.57141V3.71426H2.16547V0H0ZM7.42877 5.57153H11.143V9.2858H18.5714V13.0002H14.8571V16.7145H18.5714V20.4287H12.9999C12.5074 20.4287 12.035 20.233 11.6868 19.8847C11.3385 19.5365 11.1428 19.0641 11.1428 18.5716V13H9.28558C8.79306 13 8.32073 12.8043 7.97247 12.456C7.62421 12.1077 7.42858 11.6354 7.42853 11.1429V7.42853L7.42877 5.57153ZM2.16578 7.42865H5.57172V11.143H2.16578V7.42865ZM20.4286 7.42865H24.1429V11.143H20.4286V7.42865ZM2.16578 14.8571H5.57172V18.5715H2.16578V14.8571ZM20.4286 14.8571H24.1429V18.5715H20.4286V14.8571Z"
				fill="currentColor"
			/>
		</svg>
	</Node>
</div>

<div>
	<svg
		class="entity"
		style:opacity={spriteNodeActive ? 1 : 0}
		style:left="290px"
		style:top="135px"
		width="127"
		height="118"
		viewBox="0 0 127 118"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M50.7113 0C44.9953 1.27073 39.3407 3.04018 34.0394 5.70849C34.1607 10.3896 34.4633 14.8747 35.0768 19.4305C33.018 20.7495 30.8543 21.8816 28.9314 23.4257C26.9776 24.9288 24.9819 26.3666 23.2127 28.1245C19.6784 25.7868 15.9381 23.5898 12.0843 21.6506C7.9303 26.1211 4.04595 30.9465 0.873047 36.3459C3.36661 40.2601 6.04112 44.1941 8.51805 47.2621V73.9306V77.318V80.4009C8.57867 80.4013 8.63973 80.4032 8.69978 80.4089L29.0157 82.3679C30.0799 82.4706 30.9138 83.3274 30.9878 84.3938L31.6144 93.3618L49.336 94.6267L50.5565 86.3492C50.7148 85.2761 51.6358 84.4803 52.7213 84.4803H74.1552C75.2401 84.4803 76.161 85.2761 76.3192 86.3492L77.5397 94.6267L95.262 93.3618L95.8879 84.3938C95.9625 83.3274 96.7958 82.4712 97.86 82.3679L118.168 80.4089C118.228 80.4033 118.288 80.4014 118.349 80.4009V77.7563L118.358 77.7542V47.2621C121.218 43.6607 123.927 39.6882 126.003 36.3459C122.831 30.9465 118.945 26.1211 114.791 21.6506C110.938 23.5898 107.196 25.7868 103.662 28.1245C101.893 26.3666 99.901 24.9288 97.9443 23.4257C96.022 21.8816 93.8553 20.7495 91.8004 19.4305C92.4122 14.8747 92.7152 10.3896 92.837 5.70849C87.5352 3.04018 81.8811 1.27073 76.1622 0C73.8789 3.83746 71.791 7.99342 69.9725 12.056C67.8161 11.6956 65.6497 11.562 63.4804 11.5362V11.5326C63.4652 11.5326 63.4511 11.5362 63.4382 11.5362C63.4248 11.5362 63.4103 11.5326 63.3968 11.5326V11.5362C61.2235 11.562 59.0588 11.6956 56.9018 12.056C55.0844 7.99342 52.998 3.83746 50.7113 0V0ZM34.6384 48.4775C41.4007 48.4775 46.8819 53.9544 46.8819 60.7144C46.8819 67.479 41.4007 72.9587 34.6384 72.9587C27.8795 72.9587 22.3971 67.479 22.3971 60.7144C22.3971 53.9544 27.8795 48.4775 34.6384 48.4775ZM92.2388 48.4775C98.9971 48.4775 104.479 53.9544 104.479 60.7144C104.479 67.479 98.9971 72.9587 92.2388 72.9587C85.4754 72.9587 79.9945 67.479 79.9945 60.7144C79.9945 53.9544 85.4754 48.4775 92.2388 48.4775ZM63.4368 55.6384C65.6134 55.6384 67.3818 57.2442 67.3818 59.2199V70.4908C67.3818 72.4682 65.6134 74.0723 63.4368 74.0723C61.2601 74.0723 59.4962 72.4682 59.4962 70.4908V59.2199C59.4962 57.2442 61.2601 55.6384 63.4368 55.6384Z"
			fill="#fff"
		/>
		<path
			d="M100.123 86.5454L99.4939 95.5613C99.4181 96.6479 98.5537 97.5128 97.4671 97.5908L75.827 99.1349C75.7743 99.1389 75.7215 99.1405 75.6693 99.1405C74.5939 99.1405 73.6661 98.3513 73.5073 97.2714L72.2663 88.8557H54.6091L53.3681 97.2714C53.2014 98.4041 52.1888 99.2185 51.0483 99.1349L29.4082 97.5908C28.3216 97.5128 27.4572 96.6479 27.3815 95.5612L26.7523 86.5454L8.48438 84.7841C8.4928 86.7475 8.51805 88.8983 8.51805 89.3266C8.51805 108.62 32.9926 117.893 63.4003 118H63.4374H63.475C93.8828 117.893 118.349 108.62 118.349 89.3266C118.349 88.8905 118.375 86.7486 118.384 84.7841L100.123 86.5454Z"
			fill="#fff"
		/>
		<path
			d="M43.9361 61.4405C43.9361 65.9274 40.2996 69.5639 35.8094 69.5639C31.3214 69.5639 27.6826 65.9274 27.6826 61.4405C27.6826 56.9537 31.3214 53.3138 35.8094 53.3138C40.2996 53.3138 43.9361 56.9537 43.9361 61.4405Z"
			fill="#fff"
		/>
		<path
			d="M82.9404 61.4405C82.9404 65.9274 86.5758 69.5639 91.0627 69.5639C95.554 69.5639 99.1894 65.9274 99.1894 61.4405C99.1894 56.9537 95.554 53.3138 91.0627 53.3138C86.5758 53.3138 82.9404 56.9537 82.9404 61.4405Z"
			fill="#fff"
		/>
	</svg>
</div>

<style lang="scss">
	.nodeFrame {
		position: absolute;
		top: 42px;
		left: 22px;
	}

	.nodes,
	.nodeFrame {
		opacity: 0;
		transition: opacity 300ms linear;
		transition-delay: 400ms;
	}

	.entity {
		position: absolute;
		opacity: 0;
		transition: opacity 300ms linear;
	}

	.isIntersecting {
		opacity: 1;
	}
</style>
