<script>
	export let parentNodeActive = false;
	export let spriteNodeActive = false;
	export let audioNodeActive = false;
	export let animationNodeActive = false;
</script>

<div class="preview" class:animating={animationNodeActive}>
	<div class="placeholder" class:visible={!spriteNodeActive && parentNodeActive} />
	<svg
		class="sprite"
		class:visible={spriteNodeActive && parentNodeActive}
		width="127"
		height="118"
		viewBox="0 0 127 118"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			d="M50.7113 0C44.9953 1.27073 39.3407 3.04018 34.0394 5.70849C34.1607 10.3896 34.4633 14.8747 35.0768 19.4305C33.018 20.7495 30.8543 21.8816 28.9314 23.4257C26.9776 24.9288 24.9819 26.3666 23.2127 28.1245C19.6784 25.7868 15.9381 23.5898 12.0843 21.6506C7.9303 26.1211 4.04595 30.9465 0.873047 36.3459C3.36661 40.2601 6.04112 44.1941 8.51805 47.2621V73.9306V77.318V80.4009C8.57867 80.4013 8.63973 80.4032 8.69978 80.4089L29.0157 82.3679C30.0799 82.4706 30.9138 83.3274 30.9878 84.3938L31.6144 93.3618L49.336 94.6267L50.5565 86.3492C50.7148 85.2761 51.6358 84.4803 52.7213 84.4803H74.1552C75.2401 84.4803 76.161 85.2761 76.3192 86.3492L77.5397 94.6267L95.262 93.3618L95.8879 84.3938C95.9625 83.3274 96.7958 82.4712 97.86 82.3679L118.168 80.4089C118.228 80.4033 118.288 80.4014 118.349 80.4009V77.7563L118.358 77.7542V47.2621C121.218 43.6607 123.927 39.6882 126.003 36.3459C122.831 30.9465 118.945 26.1211 114.791 21.6506C110.938 23.5898 107.196 25.7868 103.662 28.1245C101.893 26.3666 99.901 24.9288 97.9443 23.4257C96.022 21.8816 93.8553 20.7495 91.8004 19.4305C92.4122 14.8747 92.7152 10.3896 92.837 5.70849C87.5352 3.04018 81.8811 1.27073 76.1622 0C73.8789 3.83746 71.791 7.99342 69.9725 12.056C67.8161 11.6956 65.6497 11.562 63.4804 11.5362V11.5326C63.4652 11.5326 63.4511 11.5362 63.4382 11.5362C63.4248 11.5362 63.4103 11.5326 63.3968 11.5326V11.5362C61.2235 11.562 59.0588 11.6956 56.9018 12.056C55.0844 7.99342 52.998 3.83746 50.7113 0V0ZM34.6384 48.4775C41.4007 48.4775 46.8819 53.9544 46.8819 60.7144C46.8819 67.479 41.4007 72.9587 34.6384 72.9587C27.8795 72.9587 22.3971 67.479 22.3971 60.7144C22.3971 53.9544 27.8795 48.4775 34.6384 48.4775ZM92.2388 48.4775C98.9971 48.4775 104.479 53.9544 104.479 60.7144C104.479 67.479 98.9971 72.9587 92.2388 72.9587C85.4754 72.9587 79.9945 67.479 79.9945 60.7144C79.9945 53.9544 85.4754 48.4775 92.2388 48.4775ZM63.4368 55.6384C65.6134 55.6384 67.3818 57.2442 67.3818 59.2199V70.4908C67.3818 72.4682 65.6134 74.0723 63.4368 74.0723C61.2601 74.0723 59.4962 72.4682 59.4962 70.4908V59.2199C59.4962 57.2442 61.2601 55.6384 63.4368 55.6384Z"
			fill="currentColor"
		/>
		<path
			d="M100.123 86.5454L99.4939 95.5613C99.4181 96.6479 98.5537 97.5128 97.4671 97.5908L75.827 99.1349C75.7743 99.1389 75.7215 99.1405 75.6693 99.1405C74.5939 99.1405 73.6661 98.3513 73.5073 97.2714L72.2663 88.8557H54.6091L53.3681 97.2714C53.2014 98.4041 52.1888 99.2185 51.0483 99.1349L29.4082 97.5908C28.3216 97.5128 27.4572 96.6479 27.3815 95.5612L26.7523 86.5454L8.48438 84.7841C8.4928 86.7475 8.51805 88.8983 8.51805 89.3266C8.51805 108.62 32.9926 117.893 63.4003 118H63.4374H63.475C93.8828 117.893 118.349 108.62 118.349 89.3266C118.349 88.8905 118.375 86.7486 118.384 84.7841L100.123 86.5454Z"
			fill="currentColor"
		/>
		<path
			d="M43.9361 61.4405C43.9361 65.9274 40.2996 69.5639 35.8094 69.5639C31.3214 69.5639 27.6826 65.9274 27.6826 61.4405C27.6826 56.9537 31.3214 53.3138 35.8094 53.3138C40.2996 53.3138 43.9361 56.9537 43.9361 61.4405Z"
			fill="currentColor"
		/>
		<path
			d="M82.9404 61.4405C82.9404 65.9274 86.5758 69.5639 91.0627 69.5639C95.554 69.5639 99.1894 65.9274 99.1894 61.4405C99.1894 56.9537 95.554 53.3138 91.0627 53.3138C86.5758 53.3138 82.9404 56.9537 82.9404 61.4405Z"
			fill="currentColor"
		/>
	</svg>

	<svg
		class="audio"
		class:visible={audioNodeActive && parentNodeActive}
		width="82"
		height="82"
		viewBox="0 0 82 82"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<path
			fill-rule="evenodd"
			clip-rule="evenodd"
			d="M44.1999 2.82852L41.3711 -0.000335693C19.405 22.708 19.0571 58.5728 40.3273 81.6979L43.1584 78.8667C23.4479 57.307 23.7951 23.9735 44.1999 2.82852ZM50.2999 8.92842C33.2607 26.7019 32.9156 54.5779 49.2645 72.7606L52.0974 69.9278C37.3066 53.3124 37.6505 27.967 53.129 11.7576L50.2999 8.92842ZM59.583 18.2116C47.664 30.8507 47.3253 50.4248 58.5671 63.458L61.4044 60.6207C51.7168 49.1601 52.0529 32.1145 62.4129 21.0415L59.583 18.2116Z"
			fill="currentColor"
		/>
	</svg>
</div>

<style lang="scss">
	.placeholder {
		width: 1px;
		height: 100px;
		position: absolute;
		left: 353px;
		top: 150px;
		opacity: 0;
		transition: opacity 100ms linear;

		&:before,
		&:after {
			content: '';
			display: block;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		&:before {
			background-color: rgb(255, 0, 0);
			width: 100px;
			height: 1px;
		}
		&:after {
			background-color: rgb(0, 255, 0);
			width: 1px;
			height: 100px;
		}

		&.visible {
			opacity: 1;
		}
	}

	.preview {
		color: var(--text-color);
		position: absolute;
		top: 0;
		left: 0;

		&.animating {
			animation: move 3s infinite;
		}
	}

	svg {
		position: absolute;
		opacity: 0;
		transition: opacity 100ms linear;
	}

	.sprite {
		left: 290px;
		top: 135px;

		&.visible {
			opacity: 1;
		}
	}

	.audio {
		left: 200px;
		top: 180px;

		&.visible {
			animation: pulse 1s infinite;
		}
	}

	@keyframes pulse {
		20% {
			opacity: 0;
		}
		50% {
			opacity: 1;
		}
		80% {
			opacity: 0;
		}
	}

	@keyframes move {
		0% {
			transform: translate(0, 0);
		}
		33% {
			transform: translate(-50px, 0);
		}
		66% {
			transform: translate(50px, 0);
		}
		100% {
			transform: translate(0, 0);
		}
	}
</style>
